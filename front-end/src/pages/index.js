import Head from 'next/head';
import HomePage from '~/components/HomePage';
import Background from '~/components/Background';
import LampLightAnimation from '~/components/Background/LampLightAnimation/';
import LampLigth from '~/components/Background/LampLight';
import House from '~/components/Background/House';
import Kitchen from '~/components/Background/Kitchen';
import Bath from '~/components/Background/Bath';
import Thorfer from '~/components/Background/Thorfer';
import useWindowWidth from '~/hooks/useWindowWidth';
import { useEffect, useState } from 'react';

export default function Home() {
  const windowWidth = useWindowWidth();
  const [ faviconHref, setFaviconHref ] = useState('');

  useEffect(() => {
    if (typeof window !== 'undefined') {
      const setFavicon = (color) => {
        const favicon = document.getElementById('favicon');
        favicon.href = `favicon-${ color }.svg`;
        setFaviconHref(`favicon-${ color }.svg`);
      };

      const handleColorSchemeChange = (e) => {
        const colorScheme = e.matches ? 'light' : 'dark';
        setFavicon(colorScheme);
      };

      const colorSchemeQuery = window.matchMedia('(prefers-color-scheme: dark)');
      colorSchemeQuery.addListener(handleColorSchemeChange);
      handleColorSchemeChange(colorSchemeQuery);

      return () => {
        colorSchemeQuery.removeListener(handleColorSchemeChange);
      };
    }
  }, []);
  return (
    <>
      <Head>
        <title>Home</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1, user-scalable=no" />
        <link rel="icon" href={ faviconHref } id="favicon" type="image/x-icon" />
      </Head>
      <main>
        <HomePage />
      </main>
      <Background>
        <LampLightAnimation
          top={ windowWidth >= 1440 ? '-20%' : windowWidth >= 768 ? '-27%' : '-31%' }
          left={ windowWidth >= 1440 ? '30%' : windowWidth >= 768 ? '56%' : '50%' }
        />
        <LampLigth
          top={ windowWidth >= 1440 ? '-41%' : '-53%' }
          left="20%"
          delay="2.5"
        />
        <LampLigth top="-47%" left="37%" delay="3" />
        <House
          width={ windowWidth >= 1440 ? '227' : windowWidth >= 768 ? '146' : '137' }
          height={ windowWidth >= 1440 ? '227' : windowWidth >= 768 ? '146' : '110' }
          top={ windowWidth >= 1440 ? '36%' : windowWidth >= 768 ? '4.5%' : '38%' }
          left={ windowWidth >= 1440 ? '67%' : windowWidth >= 768 ? '15%' : '16%' }
        />
        <Kitchen
          bottom={ windowWidth <= 768 ? '15%' : '16%' }
          left={ windowWidth >= 1440 ? '14%' : windowWidth >= 768 ? '15%' : '72%' }
          width={ windowWidth >= 1440 ? '140' : windowWidth >= 768 ? '90' : '70' }
          height={ windowWidth >= 1440 ? '150' : windowWidth >= 768 ? '90' : '75' }
        />
        <Bath
          bottom={ windowWidth >= 1440 ? '18%' : windowWidth >= 768 ? '5%' : '15%' }
          left={ windowWidth >= 1440 ? '85%' : windowWidth >= 768 ? '33%' : '10%' }
          width={ windowWidth >= 1440 ? '160' : '80' }
          height={ windowWidth >= 1440 ? '146' : '70' }
        />
        {windowWidth >= 768
          ? (
            <Thorfer
              top="64%"
              left="55%"
              delay="7"
              width={ windowWidth <= 992 ? '110' : '130' }
              height={ windowWidth <= 992 ? '200' : '289' }
            />
          )
          : null}
      </Background>
    </>
  );
}
